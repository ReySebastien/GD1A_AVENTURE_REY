<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title> Zelda Like! </title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <script type="text/javascript" src="menu.js"></script>
    <script type="text/javascript" src="SceneDebutJeu.js"></script>
    <script type="text/javascript" src="SceneGauche.js"></script>
    <script type="text/javascript" src="SceneHaut.js"></script>
    <script type="text/javascript" src="SceneDroite.js"></script>
    <script type="text/javascript" src="SceneBas.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

var config = {
    type: Phaser.AUTO,
    width: 1920,
    height: 1080,
    physics: {
        default: 'arcade',
        arcade: {
            gravity: { y: 0 },
            debug: true}},
    scene: [Menu, DebutJeu, SceneGauche, SceneBas, SceneDroite, SceneHaut],
    input:{gamepad:true},
};
// VARIABLES
    
var paddle;
var paddleConnected=false;
var player;
var ennemi;
var cursors;
var boutonFeu;
var groupeBullets;
var pistolet = false;
var invulnerabilite = false;
var vie = 3;
var gameOver = false;
var game = new Phaser.Game(config);

    
function preload ()
{
    this.load.image('perso_test', 'assets_test/perso_test.png');
}
    
function create ()
{
    cursors = this.input.keyboard.createCursorKeys();
    boutonFeu = this.input.keyboard.addKey('space');
    player.setCollideWorldBounds(true);
    groupeBullets = this.physics.add.group();
    
    this.scene.start("Menu")
    
}

function update ()
{
 
    if (Phaser.Input.Keyboard.JustDown(this.boutonFeu)) {
        if(this.pistolet == true){
            tirer(this.player);
        }
    }
    
}

// AUTRES FONCTIONS
function tirer(player) {
	    var coefDir;
        if (player.direction == 'left') { coefDir = -1; } else { coefDir = 1 }
        // on crée la balle a coté du joueur
        var bullet = groupeBullets.create(player.x + (25 * coefDir), player.y - 4, 'laser');
        // parametres physiques de la balle.
        bullet.setCollideWorldBounds(false);
        bullet.body.allowGravity =false;
        bullet.setVelocity(1000 * coefDir, 0); // vitesse en x et en y
    }
</script>

</body>
</html>